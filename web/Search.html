<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>体育馆赛事管理模块-赛事查询</title>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="css/main.css"/>
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button  class="navbar-toggle" data-toggle="collapse" data-target="#myList">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="#" class="navbar-brand"><span><img src="image/login.PNG"/></span> 广东海洋大学体育馆管理系统</a>
        </div>
        <div id="myList" class="navbar-collapse collapse navbar-right">
            <ul class="nav navbar-nav">
                <li><a href="Home.html"><img src="image/game.png"> 赛事模块</a></li>
                <li><a href="javascript:void(0)"><span><img src="image/place.png"></span> 场地模块</a></li>
                <li><a href="javascript:void(0)"><span><img src="image/qicai.png"></span> 器材模块</a></li>
                <li><a href="javascript:void(0)"><img src="image/user.png"> 用户模块</a></li>
            </ul>
        </div>
    </div>
    <div id="navbar_bottom">
        <ul class="pull-right">
            <li id="time">2018-06-17 21:46</li>
            <li>用户: <a href="javascript:void(0)">XXX</a></li>
            <li><a href="javascript:void(0)">退出系统</a></li>
        </ul>
    </div>
</nav>
<div class="container content2">
    <div><h3>请输入查询条件</h3></div>
    <div class="col-lg-8 col-lg-offset-2">
        <form class="form-inline">
            <div class="form-group">
                <label for="game_item">赛事类型</label>
                <select class="form-control" id="game_item">
                    <option>羽毛球</option>
                    <option>乒乓球</option>
                    <option>篮球</option>
                    <option>排球</option>
                    <option>台球</option>
                </select>
                <!--<input type="text" class="form-control" id="exampleInputName2" placeholder="Jane Doe">-->
            </div>
            <div class="form-group">
                <label for="game_time">时间段</label>
                <input type="date" class="form-control" id="game_date"/>
                <select class="form-control" id="game_time">
                    <option>8:30-9:30</option>
                    <option>9:30-10:30</option>
                    <option>10:30-11:30</option>
                    <option>14:30-15:30</option>
                    <option>15:30-16:30</option>
                    <option>16:30-17:30</option>
                    <option>17:30-18:30</option>
                    <option>18:30-19:30</option>
                    <option>19:30-20:30</option>
                </select>
            </div>
            <button type="button" class="btn btn-info btn-sm" id="search_game">查询</button>
        </form>
    </div>
    <div class="col-lg-10 col-lg-offset-1">
        <div class="table-responsive" id="search_list">
            <table class="table table-bordered table-hover" style="margin:0" id="search_list_table">
                <tr class="bg-primary">
                    <th>赛事项目</th>
                    <th>赛事时间</th>
                    <th>赛事场地</th>
                    <th>比赛双方</th>
                    <th>赛事状态</th>
                </tr>
                <!--<tr>-->
                    <!--<td>篮球</td>-->
                    <!--<td>10:30-11:30</td>-->
                    <!--<td>篮球场1号场</td>-->
                    <!--<td>软件1153：计科1152</td>-->
                    <!--<td>已结束</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td>篮球</td>-->
                    <!--<td>10:30-11:30</td>-->
                    <!--<td>篮球场1号场</td>-->
                    <!--<td>软件1153：计科1152</td>-->
                    <!--<td>正在进行</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td>篮球</td>-->
                    <!--<td>10:30-11:30</td>-->
                    <!--<td>篮球场1号场</td>-->
                    <!--<td>软件1153：计科1152</td>-->
                    <!--<td>未开始</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td>篮球</td>-->
                    <!--<td>10:30-11:30</td>-->
                    <!--<td>篮球场1号场</td>-->
                    <!--<td>软件1153：计科1152</td>-->
                    <!--<td>未开始</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td>篮球</td>-->
                    <!--<td>10:30-11:30</td>-->
                    <!--<td>篮球场1号场</td>-->
                    <!--<td>软件1153：计科1152</td>-->
                    <!--<td>未开始</td>-->
                <!--</tr>-->
            </table>
        </div>
    </div>
</div>
</body>
<script src="jquery/jquery-1.10.1.min.js"></script>
<script src="bootstrap/js/bootstrap.js"></script>
<script>
    //    导航条特效
    $("#myList ul li").on('mouseover',function () {
        $(this).addClass('animate');
    });
    $("#myList ul li").on('mouseout',function () {
        $(this).removeClass('animate');
    });
//    $("#myList ul li").on('click',function () {
//        $(this).on('mouseout',function () {
//            $(this).addClass('animate');
//        });
//        $(this).addClass('animate');
//    })


    //    var time = new Date();
    //    alert(time.toLocaleFormat("%Y-%m-%d %H:%M:%S"));
    function changeTime() {
        Date.prototype.Format = function (fmt) { //author: meizz
            var o = {
                "M+": this.getMonth() + 1, //月份
                "d+": this.getDate(), //日
                "H+": this.getHours(), //小时
                "m+": this.getMinutes(), //分
                "s+": this.getSeconds(), //秒
                "q+": Math.floor((this.getMonth() + 3) / 3), //季度
                "S": this.getMilliseconds() //毫秒
            };
            if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
            for (var k in o)
                if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
            return fmt;
        }
        var time = new Date().Format("yyyy-MM-dd HH:mm:ss");
//alert(time)
        $("#time").text(time);
    }
    $(function () {
        changeTime();
    })
    setInterval(changeTime,1000);

    $("#search_list_table td:nth-of-type(5)").each(function () {

        if($(this).text() == "未开始"){
            $(this).css('color','grey')
        }else if($(this).text() == "正在进行"){
            $(this).css('color','#5bc0de');
        }else{$(this).css('color','#fdb75d')}
    })


//    赛事查询

$("#search_game").click(function () {
    var game_table=$("#search_list_table");
    var gameitem=$("#game_item option:selected").text();
    var gamedate=$("#game_date").val().toString();
    var gametime=$("#game_time option:selected").text();
    $.ajax({
        type:"post",
        url:"searchGame.action",
        async:false,
        data:{//设置数据源
            gameItem:gameitem,
            gameDay:gamedate,
            gameTime:gametime
        },
        dataType:"text",//设置需要返回的数据类型
        success:function(data){
            var datalist = eval("("+data+")");
            var obj = datalist.objs;
            //alert(obj);
            var content=null;
            for(var i = 0 ; i < obj.length; i++){
                content += "<tr><td>"+obj[i].gameItem+"</td><td>"+obj[i].gameTime+"</td><td>"+obj[i].gamePlace+"</td><td>"+obj[i].opponent+"</td><td>未开始</td></tr>";
            }
            game_table.append(content);
        },
        error:function(){
            alert("系统异常，请稍后重试！");
        }//这里不要加","
    });
})



</script>
</html>